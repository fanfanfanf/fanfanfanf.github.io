# 1. 基本操作
### 1. 打开和关闭
```bash
vim +3 /home/new.txt        # 打开文件，并定位到第3行
vim + /home/new.txt         # 打开文件，并定位到最后一行
vim +/string /home/new.txt  # 打开文件，并定位到string的位置

末行模式下：
  w：保存
  q：退出
  wq 或 x：保存退出，wq 和 x 都是保存退出
  q！：强制退出
  w！：强制保存，管理员才有权限
  w /path/to/somewhere：将当前文件另存为到路径指定的地方
命令模式下：
  ZZ：保存并退出
```

### 2. 模式切换
```
命令模式→输入模式：
　　　　　i：在当前光标所在字符的前面，转为输入模式
　　　　　I：在当前光标所在行的行首转换为输入模式
　　　　　a：在当前光标所在字符的后面，转为输入模式
　　　　　A：在光标所在行的行尾，转换为输入模式
　　　　　o：在当前光标所在行的下方，新建一行，并转为输入模式
　　　　　O：在当前光标所在行的上方，新建一行，并转为输入模式
　　　　　s：删除光标所在字符
　　　　　r：替换光标处字符
输入模式→命令模式
　　　　　ESC键
命令模式→末行模式
　　　　　输入：即可转为末行模式
　　　　　
末行模式→命令模式
　　　　　ESC键
```

### 3. 命令模式下操作
1. 移动光标
```
w：移到下一个单词的词首
0：绝对行首
^：行首第一个非空白字符
$：绝对行尾
#G：跳转到第#行
G：最后一行

Ctrl+f：向下翻一屏
Ctrl+b：向上翻一屏
Ctrl+d：向下翻半屏
Ctrl+u：向上翻半屏
```
2. 编辑操作
```
x：删除光标所在处单个字符
#x：删除光标所在处及向后共#个字符
dd：删除当前光标所在行
#dd：删除包含当前光标所在行内的#行

p(小写p)：如果删除的或复制的为整行内容，则粘贴到光标所在行的下方，如果复制或删除的内容为非整行，则粘贴至光标所在字符的后面
P(大写P)：如果删除的或复制的为整行内容，则粘贴到光标所在行的上方，如果复制或删除的内容为非整行，则粘贴至光标所在字符的前面

yy：复制当前行
y#G：复制当前位置当#行处的所有内容

u：撤销前一次编辑操作
#u：直接撤销#次操作
Ctrl+r：撤销最近一次撤销操作

.：重复前一次编辑操作，比如，上一次dd删除了一行，现在输入.就可以重复dd删除行的操作
```

### 4. 末行模式下操作
1. 查找和替换
```
/PATTERN：从当前位置向后查找
？PATTERN：从当前位置向前查找
n：向下查找
N：向上查找

ADDR1,ADDR2s/PATTERN/String/gi
ADDR1,ADDR2 表示地址；比如1，$表示全文 （%也表示全文）
g：表示全局替换
i：表示忽略大小写
```
2. 文件和编辑操作
```
:e file   # 末行模式打开文件
:so vimrc/file  # 末行模式reload文件

w /path/to/somewhere：将当前文件另存为到路径指定的地方

r： /path/to/somefile 将另一个文件的内容填充在当前文件中(r表示读),
   例如：vim /etc/rc.sysinit 打开文件后，末行模式 输入 :r /etc/inittab ：会将 inittab文件的所有内容附加到rc.sysinit文件光标所在的位置
   
10d：可删除第10行
10,20d：删除10-20行
set nu：显示行号

！命令：可以执行bash命令

set autoindent    设置自动缩进
set shiftwidth=4  设置缩进级别
set ai sw=4       在一个命令中打开缩进并设置缩进级别

syntax on：打开语法高亮显示
syntax off：关闭语法高亮显示

set hlsearch：高亮显示搜索到的文本
set nohlsearch：取消高亮显示搜索到的文本

set paste: 设置屏蔽自动缩进等，用于粘贴内容
set nopaste：取消上面的屏蔽

set wrap 设置自动折行
set nowrap 设置不自动折行
```

### 5. 分屏
```
vim -O file1 file2 ...  # 垂直分割
vim -o file1 file2 ...  # 水平分割

:e file   # 末行模式打开文件
:so vimrc/file  # 末行模式reload文件

创建空白分屏：
　　:new
　　
打开任意文件：
　　:vsp(:vsplit) filename
　　:sp(split) filename
　　
切换分屏：
    ctrl+w+w
    
切换文件
    :bn      //下一个文件
    :bp      //上一个文件
    :ls       //列出打开的文件，带编号

退出：
   :q     # 退出当前
   :qa    # 退出所有
   
改变占比：
   :ctl+w, <  左移
   :ctl+w, >  右移
   :ctl+w, =  恢复到中间
```

# 插件
[参考](https://blog.csdn.net/z1861live/article/details/47422129)
### 1. vundle
1. 安装一个新的插件
PluginInstall命令会安装在你的.vimrc文件中列出来的所有插件。你还可以只安装某一个特定的插件，只要传递其名称。  
```
:PluginInstall 
:PluginInstall <plugin-name>
```
2. 清理闲置未用的插件
如果你有任何闲置未用的插件，只要使用PluginClean命令，就可以清理它。  
```
:PluginClean
```
3. 搜索插件  
如果你想从所提供的插件列表安装一个插件，搜索功能就很有用。  
```
:PluginSearch <text-list>
```
在搜索过程中，你可以在交互式分屏上安装、清理、研究或重新装入同一列表。安装插件不会自动装入你的插件。想自动装入插件，将插件添加到你的.vimrc文件。  
这个功能也经常用，比如:PluginSearch taglist，完成搜索后，可以按下'i'进行安装  
```
更新插件BundleUpdate
列出所有插件BundleList
```
### 2. tagbar
在源文件目录树执行如下命令：
```
ctags -R .
```
即可在当前目录下生成一个tags文件， 这个文件就是所有函数和变量的索引列表。  
接着用vim打开任一文件
```
F5 : 显示类的类和函数列表
```
将光标移到想要跳转的函数或变量上，通过快捷键 " CTRL + ] "，  即可快速跳转到函数定义处

### 3. nerdtree
```
F6 : 打开
t : 在新标签中打开文件，再用:q可关闭
i: open split
gi: preview split
s: open vsplit
gs: preview vsplit
C: 以选中目录作为根目录
m: show menu

```

### 3. NERD_commenter
```
\c<空格> 如果被选区域有部分被注释，则对被选区域执行取消注释操作，其它情况执行反转注释操作  
\ca 转换注释的方式，比如： /**/和//  

\cc 注释当前行和选中行  
\cn 没有发现和\cc有区别  
\cm 对被选区域用一对注释符进行注释，前面的注释对每一行都会添加注释  
\ci 执行反转注释操作，选中区域注释部分取消注释，非注释部分添加注释  
\cs 添加性感的注释，代码开头介绍部分通常使用该注释  
\cy 添加注释，并复制被添加注释的部分  
\c$ 注释当前光标到改行结尾的内容  
\cA 跳转到该行结尾添加注释，并进入编辑模式  
\cl \cb 左对齐和左右对其，左右对其主要针对/**/  
\cu 取消注释 
```

[其他指令](https://blog.csdn.net/xuesnowce/article/details/53117352)